window["a-cms"]=function(t){var e={};function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=8)}([function(t,e,a){"use strict";function n(t,e,a,n,o,i,s,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=r?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return{exports:t,options:c}}a.d(e,"a",(function(){return n}))},function(t,e,a){"use strict";e.a={parseAtomClass:function(t){var e=t&&t.module,a=t&&t.atomClassName;return e&&a?{module:e,atomClassName:a}:{module:"a-cms",atomClassName:"article"}},combineAtomClass:function(t,e){var a="module=".concat(t.module,"&atomClassName=").concat(t.atomClassName);if(!e)return a;var n=e.indexOf("?");return-1===n?"".concat(e,"?").concat(a):n===e.length-1?"".concat(e).concat(a):"".concat(e,"&").concat(a)}}},function(t,e){t.exports=window.Vue},function(t,e,a){var n=a(14);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(7).default)("08e95192",n,!0,{})},function(t,e,a){var n=a(16);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(7).default)("462ce381",n,!0,{})},function(t,e,a){"use strict";var n={meta:{global:!1},props:{atomClass:{type:Object},categoryIdStart:{type:Number},language:{type:String},catalogOnly:{type:Boolean},categoryIdDisable:{type:Boolean}},data:function(){return{root:{attrs:{itemToggle:!1,selectable:!0}}}},methods:{onLoadChildren:function(t){var e=this;if(t.root&&void 0===this.categoryIdStart)return new Promise((function(t){t([{id:0,attrs:{label:e.$text("Root"),toggle:!0,loadChildren:!0},data:{id:0,catalog:1}}])}));var a=t.root?this.categoryIdStart:t.id;return this.$api.post("category/children",{atomClass:this.atomClass,language:this.language,categoryId:a}).then((function(t){var a=t.list.map((function(t){return{id:t.id,attrs:{label:t.categoryName||"[".concat(e.$text("New Category"),"]"),toggle:1===t.catalog,loadChildren:1===t.catalog},data:t}}));return a=a.filter((function(t){return!(e.catalogOnly&&1!==t.data.catalog||e.categoryIdDisable&&e.categoryIdDisable===t.id)}))})).catch((function(t){throw e.$view.toast.show({text:t.message}),t}))},onNodeClick:function(t,e){this.$emit("node:click",e)}}},o=a(0),i=Object(o.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("eb-treeview",{attrs:{root:this.root,onLoadChildren:this.onLoadChildren},on:{"node:click":this.onNodeClick}})}),[],!1,null,null,null);e.a=i.exports},function(t,e,a){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var a=function(t,e){var a=t[1]||"",n=t[3];if(!n)return a;if(e&&"function"==typeof btoa){var o=(s=n,r=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(l," */")),i=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[a].concat(i).concat([o]).join("\n")}var s,r,l;return[a].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(a,"}"):a})).join("")},e.i=function(t,a,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var r=0;r<t.length;r++){var l=[].concat(t[r]);n&&o[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),e.push(l))}},e}},function(t,e,a){"use strict";function n(t,e){for(var a=[],n={},o=0;o<e.length;o++){var i=e[o],s=i[0],r={id:t+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[s]?n[s].parts.push(r):a.push(n[s]={id:s,parts:[r]})}return a}a.r(e),a.d(e,"default",(function(){return d}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},s=o&&(document.head||document.getElementsByTagName("head")[0]),r=null,l=0,c=!1,u=function(){},m=null,g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function d(t,e,a,o){c=a,m=o||{};var s=n(t,e);return f(s),function(e){for(var a=[],o=0;o<s.length;o++){var r=s[o];(l=i[r.id]).refs--,a.push(l)}e?f(s=n(t,e)):s=[];for(o=0;o<a.length;o++){var l;if(0===(l=a[o]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete i[l.id]}}}}function f(t){for(var e=0;e<t.length;e++){var a=t[e],n=i[a.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](a.parts[o]);for(;o<a.parts.length;o++)n.parts.push(v(a.parts[o]));n.parts.length>a.parts.length&&(n.parts.length=a.parts.length)}else{var s=[];for(o=0;o<a.parts.length;o++)s.push(v(a.parts[o]));i[a.id]={id:a.id,refs:1,parts:s}}}}function h(){var t=document.createElement("style");return t.type="text/css",s.appendChild(t),t}function v(t){var e,a,n=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(n){if(c)return u;n.parentNode.removeChild(n)}if(g){var o=l++;n=r||(r=h()),e=C.bind(null,n,o,!1),a=C.bind(null,n,o,!0)}else n=h(),e=y.bind(null,n),a=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else a()}}var p,b=(p=[],function(t,e){return p[t]=e,p.filter(Boolean).join("\n")});function C(t,e,a,n){var o=a?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function y(t,e){var a=e.css,n=e.media,o=e.sourceMap;if(n&&t.setAttribute("media",n),m.ssrId&&t.setAttribute("data-vue-ssr-id",e.id),o&&(a+="\n/*# sourceURL="+o.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}},function(t,e,a){"use strict";a.r(e);var n;a(9);e.default={install:function(t,e){return n?console.error("already installed."):(n=t,e({routes:a(11).default,store:a(17).default(n),config:a(18).default,locales:a(19).default,components:a(21).default}))}}},function(t,e,a){var n=a(10);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(7).default)("4c89187a",n,!0,{})},function(t,e,a){(e=a(6)(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"module.less"}]),t.exports=e},function(t,e,a){"use strict";function n(t){return a(12)("./".concat(t,".vue")).default}a.r(e),e.default=[{path:"config/list",component:n("config/list")},{path:"config/site",component:n("config/site")},{path:"config/siteBase",component:n("config/siteBase")},{path:"config/language",component:n("config/language")},{path:"config/languagePreview",component:n("config/languagePreview")},{path:"category/list",component:n("category/list")},{path:"category/edit",component:n("category/edit")},{path:"category/select",component:n("category/select")},{path:"article/contentEdit",component:n("article/contentEdit")},{path:"article/category",component:n("article/category")},{path:"article/list",component:n("article/list")},{path:"article/post",component:n("article/post")},{path:"tag/select",component:n("tag/select")},{path:"tag/list",component:n("tag/list")},{path:"block/list",component:n("block/list")},{path:"block/item",component:n("block/item")}]},function(t,e,a){var n={"./article/category.vue":22,"./article/contentEdit.vue":23,"./article/list.vue":24,"./article/post.vue":25,"./block/item.vue":26,"./block/list.vue":27,"./category/edit.vue":28,"./category/list.vue":29,"./category/select.vue":30,"./config/language.vue":31,"./config/languagePreview.vue":32,"./config/list.vue":33,"./config/site.vue":34,"./config/siteBase.vue":35,"./tag/list.vue":36,"./tag/select.vue":37};function o(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id=12},function(t,e,a){"use strict";var n=a(3);a.n(n).a},function(t,e,a){(e=a(6)(!0)).push([t.i,".category-node[data-v-0023a509] {\n  flex-grow: 1;\n  display: flex;\n  justify-content: flex-end;\n}\n.category-node .category-action + .category-action[data-v-0023a509] {\n  margin-left: 4px;\n}\n","",{version:3,sources:["/Users/yangjian/Documents/data/cabloy/egg-born-demo/src/module/a-cms/front/src/pages/category/list.vue?vue&type=style&index=0&id=0023a509&lang=less&scoped=true&","list.vue"],names:[],mappings:"AAyKA;EACE,YAAA;EACA,aAAA;EACA,yBAAA;ACxKF;ADqKA;EAMI,gBAAA;ACxKJ",file:"list.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.category-node {\n  flex-grow: 1;\n  display: flex;\n  justify-content: flex-end;\n\n  .category-action+.category-action {\n    margin-left: 4px;\n  }\n}\n\n",".category-node {\n  flex-grow: 1;\n  display: flex;\n  justify-content: flex-end;\n}\n.category-node .category-action + .category-action {\n  margin-left: 4px;\n}\n"]}]),t.exports=e},function(t,e,a){"use strict";var n=a(4);a.n(n).a},function(t,e,a){(e=a(6)(!0)).push([t.i,".selected-tags[data-v-0b043347] {\n  min-height: 40px;\n}\n.selected-tags .chip + .chip[data-v-0b043347] {\n  margin-left: 6px;\n}\n.tags[data-v-0b043347] {\n  justify-content: space-around;\n}\n.tags .chip[data-v-0b043347] {\n  cursor: pointer;\n}\n.tags .chip .chip-media[data-v-0b043347] {\n  min-width: 32px;\n  width: auto;\n  border: 1px solid var(--f7-block-header-text-color);\n  color: var(--f7-block-header-text-color);\n}\n","",{version:3,sources:["/Users/yangjian/Documents/data/cabloy/egg-born-demo/src/module/a-cms/front/src/pages/tag/select.vue?vue&type=style&index=0&id=0b043347&lang=less&scoped=true&","select.vue"],names:[],mappings:"AA8GA;EACE,gBAAA;AC7GF;ADiHI;EACE,gBAAA;AC/GN;ADoHA;EACE,6BAAA;AClHF;ADiHA;EAII,eAAA;AClHJ;AD8GA;EAOM,eAAA;EACA,WAAA;EACA,mDAAA;EACA,wCAAA;AClHN",file:"select.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.selected-tags {\n  min-height: 40px;\n\n  .chip {\n\n    &+.chip {\n      margin-left: 6px;\n    }\n  }\n}\n\n.tags {\n  justify-content: space-around;\n\n  .chip {\n    cursor: pointer;\n\n    .chip-media {\n      min-width: 32px;\n      width: auto;\n      border: 1px solid var(--f7-block-header-text-color);\n      color: var(--f7-block-header-text-color);\n    }\n\n  }\n\n}\n\n",".selected-tags {\n  min-height: 40px;\n}\n.selected-tags .chip + .chip {\n  margin-left: 6px;\n}\n.tags {\n  justify-content: space-around;\n}\n.tags .chip {\n  cursor: pointer;\n}\n.tags .chip .chip-media {\n  min-width: 32px;\n  width: auto;\n  border: 1px solid var(--f7-block-header-text-color);\n  color: var(--f7-block-header-text-color);\n}\n"]}]),t.exports=e},function(t,e,a){"use strict";function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.r(e),e.default=function(t){return{state:{configSiteBase:{},configSite:{},languages:{},blockArray:null},getters:{},mutations:{setConfigSiteBase:function(t,e){var a=e.atomClass,n=e.configSiteBase;t.configSiteBase=o(o({},t.configSiteBase),{},i({},a.module,n))},setConfigSite:function(t,e){var a=e.atomClass,n=e.configSite;t.configSite=o(o({},t.configSite),{},i({},a.module,n))},setLanguages:function(t,e){var a=e.atomClass,n=e.languages;t.languages=o(o({},t.languages),{},i({},a.module,n))},setBlockArray:function(t,e){t.blockArray=e}},actions:{getConfigSiteBase:function(e,a){var n=e.state,o=e.commit,i=a.atomClass;return new Promise((function(e,a){var s=n.configSiteBase[i.module];if(s)return e(s);t.prototype.$meta.api.post("/a/cms/site/getConfigSiteBase",{atomClass:i}).then((function(t){var a=t.data||{};o("setConfigSiteBase",{atomClass:i,configSiteBase:a}),e(a)})).catch((function(t){return a(t)}))}))},getConfigSite:function(e,a){var n=e.state,o=e.commit,i=a.atomClass;return new Promise((function(e,a){var s=n.configSite[i.module];if(s)return e(s);t.prototype.$meta.api.post("/a/cms/site/getConfigSite",{atomClass:i}).then((function(t){var a=t.data||{};o("setConfigSite",{atomClass:i,configSite:a}),e(a)})).catch((function(t){return a(t)}))}))},getLanguages:function(e,a){var n=e.state,o=e.commit,i=a.atomClass;return new Promise((function(e,a){var s=n.languages[i.module];if(s)return e(s);t.prototype.$meta.api.post("/a/cms/site/getLanguages",{atomClass:i}).then((function(t){var a=t||[];o("setLanguages",{atomClass:i,languages:a}),e(a)})).catch((function(t){return a(t)}))}))},getBlockArray:function(e){var a=e.state,n=e.commit;return new Promise((function(e,o){if(a.blockArray)return e(a.blockArray);t.prototype.$meta.api.post("/a/cms/site/getBlockArray").then((function(t){n("setBlockArray",t=t||[]),e(t)})).catch((function(t){o(t)}))}))}}}}},function(t,e,a){"use strict";a.r(e),e.default={}},function(t,e,a){"use strict";a.r(e),e.default={"zh-cn":a(20).default}},function(t,e,a){"use strict";a.r(e),e.default={Add:"添加",Article:"文章",Articles:"文章",Block:"区块",Build:"构建",Catalog:"目录",Category:"目录",Categories:"目录",Comment:"评论",Comments:"评论",Config:"配置",Content:"内容",Default:"缺省",Delete:"删除",Description:"描述",Extra:"额外",Flag:"标记",Hidden:"隐藏",Keywords:"关键字",Language:"语言",Languages:"语言",Move:"移动",Post:"发表",Preview:"预览",seconds:"秒",Star:"星标",Site:"站点",Sticky:"置顶",Sorting:"排序",Tag:"标签",Tags:"标签",Title:"标题",Url:"链接",Root:"根","Atom Name":"原子名称","Basic Info":"基本信息","Category Name":"目录名称","Extra Attributes":"额外属性","Language Configuration":"语言配置","Please specify the tag name":"请指定标签名称","Please specify the new tag name":"请指定新标签名称","Please specify the category name":"请指定目录名称","Please specify the language":"请指定语言","Select Category":"选择目录","Select Tags":"选择标签","Site Configuration":"站点配置","Time Used":"用时","What to write":"写点什么","Build Language":"构建语言","Build All Languages":"构建所有语言","Selected Tags":"已选标签","New Category":"新目录"}},function(t,e,a){"use strict";a.r(e);var n=a(5),o=a(1),i={props:{readOnly:{type:Boolean},item:{type:Object},onSave:{type:Function}},computed:{atomClass:function(){return{module:this.item.module,atomClassName:this.item.atomClassName}},languages:function(){return this.$local.state.languages[this.atomClass.module]}},created:function(){var t=this;this.$local.dispatch("getLanguages",{atomClass:this.atomClass}).then((function(e){1===e.length&&(t.item.language=e[0].value)}))},methods:{onSubmit:function(t){this.$emit("submit",t)},combineAtomClass:function(t){return o.a.combineAtomClass(this.atomClass,t)},adjustTags:function(t){return t?JSON.parse(t).map((function(t){return t.name})).join(","):""},onChooseTags:function(){var t=this;return this.item.language?new Promise((function(e){var a=t.combineAtomClass("/a/cms/tag/select");t.$view.navigate(a,{target:"_self",context:{params:{language:t.item.language,tags:t.item.tags},callback:function(a,n){200===a?(t.item.tags=n,e(!0)):!1===a&&e(!1)}}})})):(this.$view.dialog.alert(this.$text("Please specify the language")),!1)},onChooseCategory:function(){var t=this;return this.item.language?new Promise((function(e){var a=t.combineAtomClass("/a/cms/category/select");t.$view.navigate(a,{target:"_self",context:{params:{language:t.item.language,categoryIdStart:0,leafOnly:!0},callback:function(a,n){200===a?(t.item.categoryId=n.id,t.item.categoryName=n.data.categoryName,e(!0)):!1===a&&e(!1)}}})})):(this.$view.dialog.alert(this.$text("Please specify the language")),!1)},onChooseEditContent:function(){var t=this;if(!this.item.categoryId)return this.$view.dialog.alert(this.$text("Please specify the category name")),!1;var e=this.combineAtomClass("/a/cms/article/contentEdit");this.$view.navigate(e,{context:{params:{ctx:this,item:this.item,readOnly:this.readOnly},callback:function(e,a){200===e&&(t.item.content=a.content)}}})}}},s=a(0),r=Object(s.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-list",{attrs:{form:"","no-hairlines-md":""},on:{submit:t.onSubmit}},[a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Title")}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"atomName"}})],1),t._v(" "),a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Content")}}),t._v(" "),a("eb-list-item-choose",{attrs:{link:"#",dataPath:"content",title:t.$text("Content"),onChoose:t.onChooseEditContent}})],1),t._v(" "),a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Basic Info")}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"language",meta:{options:t.languages}}}),t._v(" "),a("eb-list-item-choose",{attrs:{link:"#",dataPath:"categoryId",title:t.$text("Category"),onChoose:t.onChooseCategory}},[a("div",{attrs:{slot:"after"},slot:"after"},[t._v(t._s(t.item.categoryName))])]),t._v(" "),a("eb-list-item-choose",{attrs:{link:"#",dataPath:"tags",title:t.$text("Tags"),onChoose:t.onChooseTags}},[a("div",{attrs:{slot:"after"},slot:"after"},[t._v(t._s(t.adjustTags(t.item.tags)))])]),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"keywords"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"description"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"slug"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"allowComment"}})],1),t._v(" "),a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Extra")}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"sticky"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"sorting"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"flag"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"extra"}})],1)],1)}),[],!1,null,"3b39fed2",null).exports,l={props:{readOnly:{type:Boolean},item:{type:Object}},computed:{atomClass:function(){return{module:this.item.module,atomClassName:this.item.atomClassName}},languages:function(){return this.$local.state.languages[this.atomClass.module]}},created:function(){this.$local.dispatch("getLanguages",{atomClass:this.atomClass})},methods:{combineAtomClass:function(t){return o.a.combineAtomClass(this.atomClass,t)},adjustTags:function(t){return t?JSON.parse(t).map((function(t){return t.name})).join(","):""},onChooseEditContent:function(){var t=this;if(!this.item.categoryId)return!1;var e=this.combineAtomClass("/a/cms/article/contentEdit");this.$view.navigate(e,{target:"_self",context:{params:{ctx:this,item:this.item,readOnly:this.readOnly},callback:function(e,a){200===e&&(t.item.content=a.content)}}})}}},c={meta:{global:!1},components:{itemEdit:r,itemView:Object(s.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-list",[a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Title")}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"atomName"}})],1),t._v(" "),a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Content")}}),t._v(" "),a("eb-list-item-choose",{attrs:{link:"#",dataPath:"content",title:t.$text("Content"),onChoose:t.onChooseEditContent}})],1),t._v(" "),a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Basic Info")}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"language",meta:{options:t.languages}}}),t._v(" "),a("f7-list-item",{attrs:{title:t.$text("Category")}},[a("div",{attrs:{slot:"after"},slot:"after"},[t._v(t._s(t.item.categoryName))])]),t._v(" "),a("f7-list-item",{attrs:{title:t.$text("Tags")}},[a("div",{attrs:{slot:"after"},slot:"after"},[t._v(t._s(t.adjustTags(t.item.tags)))])]),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"keywords"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"description"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"slug"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"allowComment"}})],1),t._v(" "),a("f7-list-group",[a("f7-list-item",{attrs:{"group-title":"",title:t.$text("Extra")}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"sticky"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"sorting"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"flag"}}),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"extra"}})],1)],1)}),[],!1,null,"71ee6c42",null).exports},props:{readOnly:{type:Boolean},data:{type:Object},onSave:{type:Function}},methods:{onSubmit:function(t){this.$emit("submit",t)}}},u=Object(s.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.readOnly?[e("item-view",{attrs:{readOnly:this.readOnly,item:this.data}})]:[e("item-edit",{attrs:{readOnly:this.readOnly,item:this.data,onSave:this.onSave},on:{submit:this.onSubmit}})]],2)}),[],!1,null,"9ed5d694",null).exports,m={meta:{global:!1},props:{data:{type:Object}},data:function(){return{atomClass:{module:"a-cms",atomClassName:"article"}}},computed:{languages:function(){return this.$local.state.languages[this.atomClass.module]}},created:function(){this.$local.dispatch("getLanguages",{atomClass:this.atomClass})},methods:{onSubmit:function(t){this.$emit("submit",t)},combineAtomClass:function(t){return o.a.combineAtomClass(this.atomClass,t)},onChangeLanguage:function(){this.$set(this.data,"categoryId",null),this.$set(this.data,"categoryName",null)},onChooseCategory:function(){var t=this;return this.data.language?new Promise((function(e){var a=t.combineAtomClass("/a/cms/category/select");t.$view.navigate(a,{context:{params:{language:t.data.language,categoryIdStart:0,leafOnly:!0},callback:function(a,n){200===a?(t.$set(t.data,"categoryId",n.id),t.$set(t.data,"categoryName",n.data.categoryName),e(!0)):!1===a&&e(!1)}}})})):(this.$view.dialog.alert(this.$text("Please specify the language")),!1)}}},g=Object(s.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-list",{attrs:{form:"","no-hairlines-md":""},on:{submit:t.onSubmit}},[a("eb-list-item-validate",{attrs:{dataKey:"language",meta:{options:t.languages}},on:{change:t.onChangeLanguage}}),t._v(" "),a("eb-list-item-choose",{attrs:{link:"#",dataPath:"categoryId",title:t.$text("Category"),onChoose:t.onChooseCategory}},[a("div",{attrs:{slot:"after"},slot:"after"},[t._v(t._s(t.data.categoryName))])]),t._v(" "),a("eb-list-item-validate",{attrs:{dataKey:"content"}})],1)}),[],!1,null,"65faea17",null).exports;e.default={categoryList:n.a,articleItem:u,articleSearch:g}},function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(5),s=a(1),r={mixins:[o.a.prototype.$meta.module.get("a-base").options.mixins.ebAtomClasses,o.a.prototype.$meta.module.get("a-base").options.mixins.ebMenus],components:{categoryList:i.a},data:function(){return{atomClass:s.a.parseAtomClass(this.$f7route.query),tabIdLanguages:o.a.prototype.$meta.util.nextId("tab")}},computed:{languages:function(){return this.$local.state.languages[this.atomClass.module]},pageTitle:function(){var t=this.getAtomClass(this.atomClass);return t?"".concat(this.$text("Atom"),": ").concat(t.titleLocale):this.$text("Atom")}},created:function(){this.$local.dispatch("getLanguages",{atomClass:this.atomClass})},methods:{combineAtomClass:function(t){return s.a.combineAtomClass(this.atomClass,t)},onPerformList:function(){var t=this.getAtomClass(this.atomClass);if(t){var e=t.name.replace(/^\S/,(function(t){return t.toUpperCase()})),a={module:this.atomClass.module,atomClassName:this.atomClass.atomClassName,name:"list".concat(e)},n=this.getMenu(a);if(n)return n=this.$utils.extend(n,{navigateOptions:{target:"_self"}}),this.$meta.util.performAction({ctx:this,action:n,item:a})}},onPerformSearch:function(){var t=this.combineAtomClass("/a/base/atom/search");this.$view.navigate(t,{target:"_self"})},onNodeClick:function(t){if(!t.data.catalog){var e=this.combineAtomClass("/a/cms/article/list?language=".concat(t.data.language,"&categoryId=").concat(t.data.id,"&categoryName=").concat(encodeURIComponent(t.data.categoryName)));this.$view.navigate(e,{target:"_self"})}}}},l=a(0),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",{attrs:{"page-content":!1,tabs:"","with-subnavbar":""}},[a("eb-navbar",{attrs:{title:t.pageTitle,"eb-back-link":"Back"}},[a("f7-nav-right",[a("eb-link",{attrs:{iconMaterial:"view_headline",onPerform:t.onPerformList}}),t._v(" "),a("eb-link",{attrs:{iconMaterial:"search",onPerform:t.onPerformSearch}})],1),t._v(" "),a("f7-subnavbar",[a("f7-toolbar",{attrs:{top:"",tabbar:"",scrollable:t.languages&&t.languages.length>2}},[t.languages?t._l(t.languages,(function(e,n){return a("f7-link",{key:e.value,attrs:{"tab-link":"#"+t.tabIdLanguages+"_"+e.value,"tab-link-active":0===n}},[t._v(t._s(e.title))])})):t._e()],2)],1)],1),t._v(" "),a("f7-tabs",[t.languages?t._l(t.languages,(function(e,n){return a("f7-page-content",{key:e.value,attrs:{id:t.tabIdLanguages+"_"+e.value,tab:"","tab-active":0===n}},[a("category-list",{attrs:{atomClass:t.atomClass,categoryIdStart:0,language:e.value},on:{"node:click":t.onNodeClick}})],1)})):t._e()],2)],1)}),[],!1,null,null,null);e.default=c.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(1),s={meta:{size:"large"},mixins:[o.a.prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{atomClass:i.a.parseAtomClass(this.$f7route.query),dirty:!1,module:null}},computed:{title:function(){return"".concat(this.dirty?"* ":"").concat(this.item.atomName)},readOnly:function(){return this.contextParams.readOnly},item:function(){return this.contextParams.item},editable:function(){return!this.readOnly},language:function(){return"zh-cn"===(this.$meta.util.cookies.get("locale")||"en-us")?"zh-CN":"en"},subfield:function(){return this.editable&&"small"!==this.$view.size},defaultOpen:function(){return this.editable?"":"preview"},toolbarsFlag:function(){return this.editable},navigation:function(){return!this.editable},toolbars:function(){return{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,audiolink:!1,code:!0,table:!0,block:!0,undo:!0,redo:!0,trash:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0}}},created:function(){var t=this;this.$meta.module.use("a-mavoneditor",(function(e){t.module=e}))},methods:{combineAtomClass:function(t){return i.a.combineAtomClass(this.atomClass,t)},onChange:function(t){this.readOnly||this.item.content!==t&&(this.dirty=!0,this.contextCallback(200,{content:t}))},onSave:function(){var t=this;this.onPerformSave().then((function(){t.$view.toast.show()}))},onPerformSave:function(){var t=this;return this.contextParams.ctx.onSave().then((function(){return t.dirty=!1,!0}))},onPerformPreview:function(){var t=this;return this.readOnly?this._preview():this.onPerformSave().then((function(){return t._preview()}))},_preview:function(){var t=this;return this.$api.post("render/getArticleUrl",{atomClass:this.atomClass,key:{atomId:this.item.atomId}}).then((function(e){window.open(e.url,"cms_article_".concat(t.atomClass.module,"_").concat(t.item.atomId))}))},onImageUpload:function(){return this.onUpload(1,this.item.atomId)},onAudioUpload:function(){return this.onUpload(3,this.item.atomId)},onUpload:function(t,e){var a=this;return new Promise((function(n,o){a.$view.navigate("/a/file/file/upload",{context:{params:{mode:t,atomId:e},callback:function(t,e){200===t&&n({text:e.realName,addr:e.downloadUrl}),!1===t&&o()}}})}))},onBlockAdd:function(){var t=this,e=this.item.atomId;return new Promise((function(a,n){t.$view.navigate("/a/cms/block/list",{target:"_view",context:{params:{atomId:e},callback:function(t,e){200===t&&a(e),!1===t&&n()}}})}))}}},r=a(0),l=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{title:t.title,"eb-back-link":"Back"}},[a("f7-nav-right",[t.readOnly?t._e():a("eb-link",{attrs:{iconMaterial:"save",onPerform:t.onPerformSave}}),t._v(" "),t.$device.desktop?a("eb-link",{attrs:{iconMaterial:"visibility",onPerform:t.onPerformPreview}}):t._e()],1)],1),t._v(" "),t.module?[a("eb-box",[a("mavon-editor",{ref:"editor",attrs:{value:t.item.content,onImageUpload:t.onImageUpload,onAudioUpload:t.onAudioUpload,onBlockAdd:t.onBlockAdd,language:t.language,subfield:t.subfield,editable:t.editable,defaultOpen:t.defaultOpen,toolbarsFlag:t.toolbarsFlag,navigation:t.navigation,toolbars:t.toolbars},on:{change:t.onChange,save:t.onSave}})],1)]:t._e()],2)}),[],!1,null,"38f88678",null);e.default=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(1),s={mixins:[o.a.prototype.$meta.module.get("a-base").options.mixins.ebMenus],components:{ebAtoms:o.a.prototype.$meta.module.get("a-base").options.components.ebAtoms},data:function(){return{atomClass:i.a.parseAtomClass(this.$f7route.query),language:this.$f7route.query.language,categoryId:this.$f7route.query.categoryId,categoryName:this.$f7route.query.categoryName,tagId:this.$f7route.query.tagId,tagName:this.$f7route.query.tagName,popoverId:o.a.prototype.$meta.util.nextId("popover"),actions:null}},computed:{title:function(){return this.categoryId?"".concat(this.$text("Category"),": ").concat(this.categoryName):"".concat(this.$text("Tag"),": ").concat(this.tagName)},where:function(){return this.categoryId?{categoryId:this.categoryId}:{tagId:this.tagId}},showPopover:function(){return this.actions&&this.actions.length>0}},created:function(){var t=this,e={where:{menu:1,sceneName:"create"},orders:[["sorting","asc"]]};this.atomClass&&(e.where["e.module"]=this.atomClass.module,e.where["e.atomClassName"]=this.atomClass.atomClassName),this.$api.post("/a/base/function/list",{options:e}).then((function(e){t.actions=e.list}))},methods:{combineAtomClass:function(t){return i.a.combineAtomClass(this.atomClass,t)},onAction:function(t,e){var a=this.getMenu(e);if(a)return"create"===a.action&&(e={atomClassId:e.atomClassId,module:e.module,atomClassName:e.atomClassName,atomClassIdParent:e.atomClassIdParent,language:this.language,categoryId:this.categoryId},a=this.$utils.extend({},a,{targetEl:t.target})),this.$meta.util.performAction({ctx:this,action:a,item:e})},onPerformSearch:function(){var t=this.combineAtomClass("/a/base/atom/search");this.$view.navigate(t,{target:"_self"})},onPerformAtomOrders:function(t){this.$refs.all.openPopoverForAtomOrders(t.currentTarget)}}},r=a(0),l=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",{attrs:{"page-content":!1}},[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.title,"eb-back-link":"Back"}},[a("f7-nav-right",[t.showPopover&&t.categoryId?a("f7-link",{attrs:{iconMaterial:"add","popover-open":"#"+t.popoverId}}):t._e(),t._v(" "),a("eb-link",{attrs:{iconMaterial:"search",onPerform:t.onPerformSearch}}),t._v(" "),a("eb-link",{attrs:{iconMaterial:"sort",onPerform:t.onPerformAtomOrders}})],1)],1),t._v(" "),a("eb-tab-page-content",{attrs:{tab:!1,"tab-active":""}},[a("eb-atoms",{ref:"all",attrs:{slot:"list",mode:t.categoryId?"all":"tag",atomClass:t.atomClass,where:t.where},slot:"list"})],1),t._v(" "),a("f7-popover",{attrs:{id:t.popoverId}},[t.showPopover?a("f7-list",{attrs:{inset:""}},t._l(t.actions,(function(e){return a("eb-list-button",{key:e.id,attrs:{"popover-close":"",context:e,onPerform:t.onAction}},[t._v(t._s(e.titleLocale))])})),1):t._e()],1)],1)}),[],!1,null,null,null);e.default=l.exports},function(t,e,a){"use strict";a.r(e);var n={meta:{size:"medium"},data:function(){return{}},created:function(){},methods:{onPageAfterIn:function(){var t=this,e=JSON.parse(this.$f7route.query.item);this.$api.post("/a/base/atom/create",{atomClass:{module:e.module,atomClassName:e.atomClassName},item:e}).then((function(a){var n="/a/base/atom/edit?atomId=".concat(a.atomId,"&itemId=").concat(a.itemId,"&module=").concat(e.module,"&atomClassName=").concat(e.atomClassName,"&atomClassIdParent=").concat(e.atomClassIdParent);t.$view.navigate(n,{target:"_self",reloadCurrent:!0})}))}}},o=a(0),i=Object(o.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("eb-page",{on:{"page:afterin":this.onPageAfterIn}},[e("eb-navbar",{attrs:{large:"",largeTransparent:"",title:this.$text("Post"),"eb-back-link":"Back"}}),this._v(" "),e("f7-block",{staticClass:"text-align-center"},[e("f7-preloader")],1)],1)}),[],!1,null,null,null);e.default=i.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o={mixins:[a.n(n).a.prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{block:null,item:null,meta:null,moduleBlock:null}},computed:{title:function(){return this.block?"".concat(this.$text("Block"),": ").concat(this.block.meta.titleLocale):this.$text("Block")},validateParams:function(){return this.block?{module:this.block.meta.module,validator:this.block.meta.validator}:null}},mounted:function(){var t=this;this.block=this.contextParams.block,this.item=this.block.data.default,this.meta={atomId:this.contextParams.atomId},this.$meta.module.use(this.block.meta.module,(function(e){t.moduleBlock=e}))},methods:{onPerformValidate:function(){var t=this,e=this.block.meta.fullName;return this.$api.post("site/blockSave",{blockName:e,item:this.item}).then((function(a){t.contextCallback(200,{name:e,content:a}),t.$view.close()}))},onPerformDone:function(){return this.$refs.validate.perform()},onSubmit:function(){return this.onPerformDone()}}},i=a(0),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.title,"eb-back-link":"Back"}},[a("f7-nav-right",[a("eb-link",{attrs:{iconMaterial:"done",onPerform:t.onPerformDone}})],1)],1),t._v(" "),t.moduleBlock?a("eb-validate",{ref:"validate",attrs:{readOnly:!1,auto:"",data:t.item,params:t.validateParams,meta:t.meta,onPerform:t.onPerformValidate},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}}):t._e()],1)}),[],!1,null,"13d48035",null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o={mixins:[a.n(n).a.prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{blocks:null}},created:function(){var t=this;this.$local.dispatch("getBlockArray").then((function(e){t.blocks=e}))},methods:{onPerformItem:function(t,e){var a=this,n=this.contextParams.atomId;this.$view.navigate("/a/cms/block/item",{target:"_self",context:{params:{block:e,atomId:n},callback:function(t,e){200===t&&a.contextCallback(200,e)}}})}}},i=a(0),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Block"),"eb-back-link":"Back"}}),t._v(" "),a("f7-list",t._l(t.blocks,(function(e){return a("eb-list-item",{key:e.meta.fullName,attrs:{title:e.meta.titleLocale,link:"#",context:e,onPerform:t.onPerformItem}})})),1)],1)}),[],!1,null,null,null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var n=a(1),o={data:function(){return{atomClass:n.a.parseAtomClass(this.$f7route.query),categoryId:this.$f7route.query.categoryId,category:null}},computed:{title:function(){var t=this.$text("Category");return this.category&&(t="".concat(t,": ").concat(this.category.categoryName)),t}},created:function(){var t=this;this.$api.post("category/item",{categoryId:this.categoryId}).then((function(e){t.category=e}))},methods:{onPerformValidate:function(){var t=this;return this.$api.post("category/save",{categoryId:this.categoryId,data:this.category}).then((function(){t.$meta.eventHub.$emit("a-cms:category:save",{atomClass:t.atomClass,categoryId:t.categoryId,categoryIdParent:t.category.categoryIdParent,category:t.category}),t.$f7router.back()}))},onPerformSave:function(){return this.$refs.validate.perform()}}},i=a(0),s=Object(i.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("eb-page",[e("eb-navbar",{attrs:{large:"",largeTransparent:"",title:this.title,"eb-back-link":"Back"}},[e("f7-nav-right",[e("eb-link",{attrs:{iconMaterial:"save",onPerform:this.onPerformSave}})],1)],1),this._v(" "),e("eb-validate",{ref:"validate",attrs:{auto:"",data:this.category,params:{validator:"category"},onPerform:this.onPerformValidate}})],1)}),[],!1,null,null,null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var n=a(1),o={data:function(){return{atomClass:n.a.parseAtomClass(this.$f7route.query),language:this.$f7route.query.language,root:{attrs:{itemToggle:!1,selectable:!0}}}},computed:{title:function(){var t=this.$text("Categories");return"".concat(t,": ").concat(this.language)}},mounted:function(){this.$meta.eventHub.$on("a-cms:category:save",this.onCategorySave)},beforeDestroy:function(){this.$meta.eventHub.$off("a-cms:category:save",this.onCategorySave)},methods:{combineAtomClass:function(t){return n.a.combineAtomClass(this.atomClass,t)},onLoadChildren:function(t){var e=this;return t.root?new Promise((function(t){t([{id:0,attrs:{link:"#",label:e.$text("Root"),toggle:!0,loadChildren:!0},data:{id:0,catalog:1}}])})):this.$api.post("category/children",{atomClass:this.atomClass,language:this.language,categoryId:t.id}).then((function(t){return t.list.map((function(t){return{id:t.id,attrs:{link:"#",label:t.categoryName||"[".concat(e.$text("New Category"),"]"),toggle:1===t.catalog,loadChildren:1===t.catalog},data:t}}))})).catch((function(t){throw e.$view.toast.show({text:t.message}),t}))},onNodeClick:function(t,e){if(e.id){var a=this.combineAtomClass("/a/cms/category/edit?categoryId=".concat(e.id));this.$view.navigate(a)}},onNodeClickAdd:function(t){var e=this,a=t.data.id;this.$view.dialog.prompt(this.$text("Please specify the category name")).then((function(n){n&&e.$api.post("category/add",{atomClass:e.atomClass,data:{categoryName:n,language:e.language,categoryIdParent:a}}).then((function(){e.reloadNode(t,{attrs:{toggle:!0,loadChildren:!0}})}))})).catch((function(){}))},onNodeClickDelete:function(t){var e=this;return this.$view.dialog.confirm().then((function(){return e.$api.post("category/delete",{categoryId:t.data.id}).then((function(){e.reloadNode(t.parent)})).catch((function(t){return e.$view.dialog.alert(t.message)}))}))},onNodeClickMove:function(t){var e=this,a=t.data.id,n=this.combineAtomClass("/a/cms/category/select");this.$view.navigate(n,{context:{params:{language:this.language,categoryIdDisable:a},callback:function(n,o){if(200===n){var i=o.id;t.data.categoryIdParent!==i&&e.$api.post("category/move",{categoryId:a,categoryIdParent:i}).then((function(){e.reloadNode(e.findNode(t.data.categoryIdParent)),e.reloadNode(e.findNode(i),{attrs:{toggle:!0,loadChildren:!0}})}))}}}})},reloadNode:function(t,e){t&&this.$refs.tree.reloadNode(t,e)},findNode:function(t){return this.$refs.tree.find(null,(function(e){return e.id===t}))},onCategorySave:function(t){if(t.atomClass.module===this.atomClass.module){var e=this.findNode(t.categoryIdParent);this.reloadNode(e)}}}},i=(a(13),a(0)),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.title,"eb-back-link":"Back"}}),t._v(" "),a("eb-treeview",{ref:"tree",attrs:{root:t.root,onLoadChildren:t.onLoadChildren},on:{"node:click":t.onNodeClick},scopedSlots:t._u([{key:"root-end",fn:function(e){var n=e.node;return a("div",{staticClass:"category-node"},[a("f7-link",{staticClass:"category-action",on:{click:function(e){return e.stopPropagation(),t.onNodeClickAdd(n)}}},[t._v(t._s(t.$text("Add")))]),t._v(" "),n.id>0?a("f7-link",{staticClass:"category-action",on:{click:function(e){return e.stopPropagation(),t.onNodeClickMove(n)}}},[t._v(t._s(t.$text("Move")))]):t._e(),t._v(" "),n.id>0?a("f7-link",{staticClass:"category-action",on:{click:function(e){return e.stopPropagation(),t.onNodeClickDelete(n)}}},[t._v(t._s(t.$text("Delete")))]):t._e()],1)}}])})],1)}),[],!1,null,"0023a509",null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(1),s={mixins:[o.a.prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{atomClass:i.a.parseAtomClass(this.$f7route.query)}},computed:{categoryIdStart:function(){return this.contextParams.categoryIdStart},multiple:function(){return this.contextParams.multiple},language:function(){return this.contextParams.language},catalogOnly:function(){return this.contextParams.catalogOnly},leafOnly:function(){return this.contextParams.leafOnly},categoryIdDisable:function(){return this.contextParams.categoryIdDisable},root:function(){return{attrs:{itemToggle:!1,selectable:!1,multiple:this.multiple,checkbox:!0,checkOnLabel:!0}}}},methods:{onLoadChildren:function(t){var e=this;if(t.root&&void 0===this.categoryIdStart)return new Promise((function(t){var a=!e.leafOnly;t([{id:0,attrs:{label:e.$text("Root"),toggle:!0,loadChildren:!0,checkbox:a,checkOnLabel:a,selectable:a,itemToggle:!a},data:{id:0,catalog:1}}])}));var a=t.root?this.categoryIdStart:t.id;return this.$api.post("category/children",{atomClass:this.atomClass,language:this.language,categoryId:a}).then((function(t){var a=t.list.map((function(t){var a=!e.leafOnly||0===t.catalog;return{id:t.id,attrs:{label:t.categoryName||"[".concat(e.$text("New Category"),"]"),toggle:1===t.catalog,loadChildren:1===t.catalog,checkbox:a,checkOnLabel:a,selectable:a,itemToggle:!a},data:t}}));return a=a.filter((function(t){return!(e.catalogOnly&&1!==t.data.catalog||e.categoryIdDisable&&e.categoryIdDisable===t.id)}))})).catch((function(t){throw e.$view.toast.show({text:t.message}),t}))},onDone:function(){var t=this.$refs.tree.checked();t&&0!==t.length&&(this.contextCallback(200,t),this.$f7router.back())}}},r=a(0),l=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Select Category"),"eb-back-link":"Back"}},[a("f7-nav-right",[a("eb-link",{attrs:{iconMaterial:"done"},on:{click:function(e){return e.preventDefault(),t.onDone(e)}}})],1)],1),t._v(" "),a("eb-treeview",{ref:"tree",attrs:{root:t.root,onLoadChildren:t.onLoadChildren}})],1)}),[],!1,null,null,null);e.default=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(1),o={data:function(){return{atomClass:n.a.parseAtomClass(this.$f7route.query),language:this.$f7route.query.language,content:"{}"}},computed:{title:function(){var t=this.$text("Language");return"".concat(t,": ").concat(this.language)}},created:function(){var t=this;this.$api.post("site/getConfigLanguage",{atomClass:this.atomClass,language:this.language}).then((function(e){e.data?t.content=JSON5.stringify(e.data,null,2):t.content="{}"}))},methods:{combineAtomClass:function(t){return n.a.combineAtomClass(this.atomClass,t)},onSize:function(t){this.$$(this.$refs.textarea).css({height:"".concat(t.height-20,"px"),width:"".concat(t.width-20,"px")})},onInput:function(t){this.content=t.target.value},onPerformSave:function(){var t=this,e=JSON5.parse(this.content);return this.$api.post("site/setConfigLanguage",{atomClass:this.atomClass,language:this.language,data:e}).then((function(){return t.$emit("preview"),!0}))},onPerformPreview:function(){var t=this.combineAtomClass("/a/cms/config/languagePreview?language=".concat(this.language));this.$view.navigate(t,{context:{params:{source:this}}})}}},i=a(0),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{title:t.title,"eb-back-link":"Back"}},[a("f7-nav-right",[a("eb-link",{attrs:{iconMaterial:"save",onPerform:t.onPerformSave}}),t._v(" "),a("eb-link",{attrs:{iconMaterial:"visibility",onPerform:t.onPerformPreview}})],1)],1),t._v(" "),a("eb-box",{on:{size:t.onSize}},[a("textarea",{ref:"textarea",staticClass:"json-textarea",attrs:{type:"textarea"},domProps:{value:t.content},on:{input:t.onInput}})])],1)}),[],!1,null,null,null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(1),s={mixins:[o.a.prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{atomClass:i.a.parseAtomClass(this.$f7route.query),language:this.$f7route.query.language,content:"{}"}},computed:{params:function(){return this.contextParams},source:function(){return this.contextParams&&this.contextParams.source}},created:function(){this.onLoad()},mounted:function(){this.source&&this.source.$on("preview",this.onPreview)},beforeDestroy:function(){this.source&&this.source.$off("preview",this.onPreview)},methods:{combineAtomClass:function(t){return i.a.combineAtomClass(this.atomClass,t)},onPreview:function(){this.onLoad()},onLoad:function(){var t=this;this.$api.post("site/getConfigLanguagePreview",{atomClass:this.atomClass,language:this.language}).then((function(e){e.data?t.content=JSON5.stringify(e.data,null,2):t.content="{}"}))},onSize:function(t){this.$$(this.$refs.textarea).css({height:"".concat(t.height-20,"px"),width:"".concat(t.width-20,"px")})}}},r=a(0),l=Object(r.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("eb-page",[e("eb-navbar",{attrs:{title:this.$text("Preview"),"eb-back-link":"Back"}}),this._v(" "),e("eb-box",{on:{size:this.onSize}},[e("textarea",{ref:"textarea",staticClass:"json-textarea",attrs:{type:"textarea",readonly:"readonly"},domProps:{value:this.content}})])],1)}),[],!1,null,null,null);e.default=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(1),s={mixins:[o.a.prototype.$meta.module.get("a-base").options.mixins.ebModules],data:function(){return{atomClass:i.a.parseAtomClass(this.$f7route.query),stats:null}},computed:{languages:function(){return this.$local.state.languages[this.atomClass.module]},pageTitle:function(){var t=this.getModule(this.atomClass.module);return t?t.titleLocale:""}},watch:{languages:function(t){this.getStats(t)}},created:function(){var t=this;this.$local.dispatch("getLanguages",{atomClass:this.atomClass}).then((function(e){t.getStats(e)}))},methods:{combineAtomClass:function(t){return i.a.combineAtomClass(this.atomClass,t)},onPerformBuild:function(){var t=this;return this.$view.dialog.confirm().then((function(){return t.$api.post("site/buildLanguages",{atomClass:t.atomClass}).then((function(e){var a=e.progressId;t.$view.dialog.progressbar({progressId:a,title:t.$text("Build All Languages")})}))}))},onPerformBuildLanguage:function(t,e){var a=this;return this.$view.dialog.confirm().then((function(){return a.$api.post("site/buildLanguage",{atomClass:a.atomClass,language:e.value}).then((function(t){var n=t.progressId;a.$view.dialog.progressbar({progressId:n,title:"".concat(a.$text("Build")," ").concat(e.title)})}))}))},onPerformPreview:function(t,e){var a=this;return this.$api.post("site/getUrl",{atomClass:this.atomClass,language:e.value,path:"index.html"}).then((function(t){window.open(t,"cms_site_".concat(a.atomClass.module,"_").concat(e.value))}))},combineLinkArticles:function(t){var e={"f.language":t};return this.combineAtomClass("/a/base/atom/list?where=".concat(encodeURIComponent(JSON.stringify(e))))},combineLinkComments:function(t){var e={"f.language":t};return this.combineAtomClass("/a/base/comment/all?where=".concat(encodeURIComponent(JSON.stringify(e))))},getStats:function(t){var e=this;if(!t)return this.stats=null;this.$api.post("site/getStats",{atomClass:this.atomClass,languages:t.map((function(t){return t.value}))}).then((function(t){e.stats=t}))},getStat:function(t,e){if(!this.stats)return"--";var a=this.stats[t];return a?a[e]:"--"}}},r=a(0),l=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.pageTitle,"eb-back-link":"Back"}}),t._v(" "),a("f7-list",[a("eb-list-item",{attrs:{title:t.$text("Site")}},[a("div",{attrs:{slot:"after"},slot:"after"},[a("eb-link",{attrs:{iconMaterial:"settings","eb-href":t.combineAtomClass("config/site")}},[t._v(t._s(t.$text("Config")))]),t._v(" "),a("eb-link",{attrs:{iconMaterial:"build",onPerform:t.onPerformBuild}},[t._v(t._s(t.$text("Build")))])],1)]),t._v(" "),a("f7-list-group",[a("f7-list-item",{attrs:{title:t.$text("Languages"),"group-title":""}})],1)],1),t._v(" "),t._l(t.languages,(function(e){return a("div",{key:e.value},[a("f7-block-title",{attrs:{medium:""}},[t._v(t._s(e.title))]),t._v(" "),a("f7-card",[a("f7-card-content",[a("f7-row",[a("f7-col",{staticClass:"flex-direction-column text-align-center"},[a("div",[a("eb-link",{attrs:{"eb-href":t.combineLinkArticles(e.value)}},[t._v(t._s(t.$text("Articles")))])],1),t._v(" "),a("div",[t._v(t._s(t.getStat(e.value,"articles")))])]),t._v(" "),a("f7-col",{staticClass:"flex-direction-column text-align-center"},[a("div",[a("eb-link",{attrs:{"eb-href":t.combineLinkComments(e.value)}},[t._v(t._s(t.$text("Comments")))])],1),t._v(" "),a("div",[t._v(t._s(t.getStat(e.value,"comments")))])]),t._v(" "),a("f7-col",{staticClass:"flex-direction-column text-align-center"},[a("div",[a("eb-link",{attrs:{"eb-href":t.combineAtomClass("category/list?language="+e.value)}},[t._v(t._s(t.$text("Categories")))])],1),t._v(" "),a("div",[t._v(t._s(t.getStat(e.value,"categories")))])]),t._v(" "),a("f7-col",{staticClass:"flex-direction-column text-align-center"},[a("div",[a("eb-link",{attrs:{"eb-href":t.combineAtomClass("tag/list?language="+e.value)}},[t._v(t._s(t.$text("Tags")))])],1),t._v(" "),a("div",[t._v(t._s(t.getStat(e.value,"tags")))])])],1)],1),t._v(" "),a("f7-card-footer",[a("eb-link",{attrs:{iconMaterial:"settings","eb-href":t.combineAtomClass("config/language?language="+e.value)}},[t._v(t._s(t.$text("Config")))]),t._v(" "),a("eb-link",{attrs:{iconMaterial:"build",context:e,onPerform:t.onPerformBuildLanguage}},[t._v(t._s(t.$text("Build")))]),t._v(" "),t.$device.desktop?a("eb-link",{attrs:{iconMaterial:"visibility",context:e,onPerform:t.onPerformPreview}},[t._v(t._s(t.$text("Preview")))]):t._e()],1)],1)],1)}))],2)}),[],!1,null,null,null);e.default=l.exports},function(t,e,a){"use strict";a.r(e);var n=a(1),o={data:function(){return{atomClass:n.a.parseAtomClass(this.$f7route.query),content:"{}"}},created:function(){var t=this;this.$local.dispatch("getConfigSite",{atomClass:this.atomClass}).then((function(e){t.content=e?JSON5.stringify(e,null,2):"{}"}))},methods:{combineAtomClass:function(t){return n.a.combineAtomClass(this.atomClass,t)},onSize:function(t){this.$$(this.$refs.textarea).css({height:"".concat(t.height-20,"px"),width:"".concat(t.width-20,"px")})},onInput:function(t){this.content=t.target.value},onPerformSave:function(){var t=this,e=JSON5.parse(this.content);return this.$api.post("site/setConfigSite",{atomClass:this.atomClass,data:e}).then((function(){return t.$local.commit("setConfigSite",{atomClass:t.atomClass,configSite:e}),t.$local.commit("setLanguages",{atomClass:t.atomClass,languages:null}),t.$local.dispatch("getLanguages",{atomClass:t.atomClass}),!0}))}}},i=a(0),s=Object(i.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{title:t.$text("Site Configuration"),"eb-back-link":"Back"}},[a("f7-nav-right",[a("eb-link",{attrs:{iconMaterial:"save",onPerform:t.onPerformSave}}),t._v(" "),a("eb-link",{attrs:{iconMaterial:"info","eb-href":t.combineAtomClass("config/siteBase")}})],1)],1),t._v(" "),a("eb-box",{on:{size:t.onSize}},[a("textarea",{ref:"textarea",staticClass:"json-textarea",attrs:{type:"textarea"},domProps:{value:t.content},on:{input:t.onInput}})])],1)}),[],!1,null,null,null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var n=a(1),o={data:function(){return{atomClass:n.a.parseAtomClass(this.$f7route.query),content:"{}"}},created:function(){var t=this;this.$local.dispatch("getConfigSiteBase",{atomClass:this.atomClass}).then((function(e){t.content=e?JSON5.stringify(e,null,2):"{}"}))},methods:{onSize:function(t){this.$$(this.$refs.textarea).css({height:"".concat(t.height-20,"px"),width:"".concat(t.width-20,"px")})}}},i=a(0),s=Object(i.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("eb-page",[e("eb-navbar",{attrs:{title:this.$text("Default"),"eb-back-link":"Back"}}),this._v(" "),e("eb-box",{on:{size:this.onSize}},[e("textarea",{ref:"textarea",staticClass:"json-textarea",attrs:{type:"textarea",readonly:"readonly"},domProps:{value:this.content}})])],1)}),[],!1,null,null,null);e.default=s.exports},function(t,e,a){"use strict";a.r(e);var n=a(1);function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){s(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r={data:function(){return{atomClass:n.a.parseAtomClass(this.$f7route.query),language:this.$f7route.query.language,items:null}},computed:{title:function(){var t=this.$text("Tags");return"".concat(t,": ").concat(this.language)}},created:function(){this.reload()},methods:{combineAtomClass:function(t){return n.a.combineAtomClass(this.atomClass,t)},onRefresh:function(t){t(),this.reload()},reload:function(){var t=this,e={where:{language:this.language},orders:[["tagName","asc"]]};this.$api.post("tag/list",{atomClass:this.atomClass,options:e}).then((function(e){t.items=e.list}))},onPerformAdd:function(){var t=this;this.$view.dialog.prompt(this.$text("Please specify the tag name")).then((function(e){e&&t.$api.post("tag/add",{atomClass:t.atomClass,data:{tagName:e,language:t.language}}).then((function(){t.reload()}))})).catch((function(){}))},onItemClick:function(t,e){var a=this.combineAtomClass("/a/cms/article/list?language=".concat(e.language,"&tagId=").concat(e.id,"&tagName=").concat(encodeURIComponent(e.tagName)));this.$view.navigate(a,{target:"_self"})},onPerformEdit:function(t,e){var a=this;this.$view.dialog.prompt(this.$text("Please specify the new tag name")).then((function(t){t&&a.$api.post("tag/save",{tagId:e.id,data:{tagName:t}}).then((function(){var n=a.items.findIndex((function(t){return t.id===e.id}));-1!==n&&a.items.splice(n,1,i(i({},e),{},{tagName:t}))}))})).catch((function(){}))},onPerformDelete:function(t,e){var a=this;return this.$view.dialog.confirm().then((function(){return a.$api.post("tag/delete",{tagId:e.id}).then((function(){a.$meta.util.swipeoutClose(t.target);var n=a.items.findIndex((function(t){return t.id===e.id}));-1!==n&&a.items.splice(n,1)})).catch((function(t){return a.$view.dialog.alert(t.message)}))}))}}},l=a(0),c=Object(l.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",{attrs:{ptr:""},on:{"ptr:refresh":t.onRefresh}},[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.title,"eb-back-link":"Back"}},[a("f7-nav-right",[a("eb-link",{attrs:{iconMaterial:"add",onPerform:t.onPerformAdd}})],1)],1),t._v(" "),a("f7-list",t._l(t.items,(function(e){return a("eb-list-item",{key:e.id,staticClass:"item",attrs:{title:e.tagName,badge:e.articleCount,link:"#",context:e,onPerform:t.onItemClick,swipeout:""}},[a("eb-context-menu",[a("div",{attrs:{slot:"right"},slot:"right"},[a("div",{attrs:{color:"orange",close:"",context:e,onPerform:t.onPerformEdit}},[t._v(t._s(t.$text("Edit")))]),t._v(" "),a("div",{attrs:{color:"red",context:e,onPerform:t.onPerformDelete}},[t._v(t._s(t.$text("Delete")))])])])],1)})),1),t._v(" "),t.items&&0===t.items.length?a("div",{staticClass:"text-align-center"},[t._v(t._s(t.$text("No Data")))]):t._e()],1)}),[],!1,null,"115ba5e7",null);e.default=c.exports},function(t,e,a){"use strict";a.r(e);var n=a(2),o=a.n(n),i=a(1),s={mixins:[o.a.prototype.$meta.module.get("a-components").options.mixins.ebPageContext],data:function(){return{atomClass:i.a.parseAtomClass(this.$f7route.query),tagsCurrent:[],tagsAll:null,searchQuery:null}},computed:{language:function(){return this.contextParams.language},tags:function(){return this.contextParams.tags},tagsAll2:function(){var t=this;return this.tagsAll&&this.searchQuery?this.tagsAll.filter((function(e){return e.tagName.toLowerCase().indexOf(t.searchQuery.toLowerCase())>-1})):this.tagsAll}},created:function(){var t=this;this.initTagsCurrent();var e={where:{language:this.language},orders:[["tagName","asc"]]};this.$api.post("tag/list",{atomClass:this.atomClass,options:e}).then((function(e){t.tagsAll=e.list}))},methods:{initTagsCurrent:function(){if(!this.tags)return this.tagsCurrent=[];this.tagsCurrent=JSON.parse(this.tags).concat()},tagIndex:function(t){return this.tagsCurrent.findIndex((function(e){return e.id===t.id}))},onTagRemove:function(t){var e=this.tagIndex(t);e>-1&&this.tagsCurrent.splice(e,1)},onTagSwitch:function(t){var e=this.tagIndex(t);e>-1?this.tagsCurrent.splice(e,1):this.tagsCurrent.push({id:t.id,name:t.tagName})},onPerformDone:function(){this.contextCallback(200,this.tagsCurrent.length>0?JSON.stringify(this.tagsCurrent):null),this.$f7router.back()},onPerformSearch:function(){this.$refs.searchbar.f7Searchbar.enable()},onSearch:o.a.prototype.$meta.util.debounce((function(t,e){this.searchQuery=e}),200),onDisable:function(){this.searchQuery=null}}},r=(a(15),a(0)),l=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("eb-page",[a("eb-navbar",{attrs:{large:"",largeTransparent:"",title:t.$text("Select Tags"),"eb-back-link":"Back"}},[a("f7-nav-right",[a("eb-link",{attrs:{iconMaterial:"search",onPerform:t.onPerformSearch}}),t._v(" "),a("eb-link",{ref:"buttonSubmit",attrs:{iconMaterial:"done",onPerform:t.onPerformDone}})],1),t._v(" "),a("f7-searchbar",{ref:"searchbar",attrs:{expandable:"",backdrop:!1,"disable-button":!0,"clear-button":!0,"custom-search":!0},on:{"searchbar:search":t.onSearch,"searchbar:disable":t.onDisable}})],1),t._v(" "),a("f7-block-title",[t._v(t._s(t.$text("Selected Tags")))]),t._v(" "),a("f7-block",{staticClass:"selected-tags"},t._l(t.tagsCurrent,(function(e){return a("f7-chip",{key:e.id,attrs:{text:e.name,deleteable:""},on:{click:function(a){return t.onTagRemove(e)}}})})),1),t._v(" "),a("f7-block",[a("div",{staticClass:"row tags"},[t._l(t.tagsAll2,(function(e){return a("div",{key:e.id,class:{chip:!0,"col-33":!0,"chip-outline":-1===t.tagIndex(e)},on:{click:function(a){return t.onTagSwitch(e)}}},[a("div",{staticClass:"chip-media"},[t._v(t._s(e.articleCount))]),t._v(" "),a("div",{staticClass:"chip-label"},[t._v(t._s(e.tagName))])])})),t._v(" "),a("div",{staticClass:"col-33"}),t._v(" "),a("div",{staticClass:"col-33"})],2)])],1)}),[],!1,null,"0b043347",null);e.default=l.exports}]);